@startuml
'https://plantuml.com/class-diagram

entity User {
    * user_id: int unsigned <<generated>>
    --
    * user_name: varchar(50)
    introduction: text
}

entity TwitterUser {
	* twitter_user_id: int unsigned <<generated>>
	--
	* user_id: int unsigned <<foreign key>>
	* twitter_id: varchar(255)
	* screen_name: varchar(255)
	* access_token: varchar(255)
	* token_secret: varchar(255)
}

User ||-|| TwitterUser

entity GameSystem {
	* game_system_id: int unsigned <<generated>>
	--
	* game_system_name: varchar(255) <<unique>>
}

entity RuleBook {
    * rule_book_id: int unsigned <<generated>>
    --
    * game_system_id: int unsigned <<foreign key>>
    * rule_book_name: varchar(255)
    * rule_book_type: varchar(50)
}

GameSystem ||-o{ RuleBook

entity RuleBookDictionary {
    * rule_book_dictionary_id: int unsigned <<generated>>
    --
    * rule_book_id: int unsigned <<foreign key>>
    * rule_book_name: varchar(255)
}

RuleBook ||-|{ RuleBookDictionary

entity Scenario {
    * scenario_id: int unsigned <<generated>>
    --
    * scenario_name: varchar(255)
    * scenario_type: varchar(50)
    scenario_url: varchar(255)
    game_system_id: int unsigned <<foreign key>>
}

GameSystem ||-o{ Scenario

entity Author {
	* author_id: int unsigned <<generated>>
	--
	* author_name: varchar(100)
}

entity ScenarioAuthor {
	* scenario_author_id: int unsigned <<generated>>
	--
	* scenario_id: int unsigned <<foreign key>>
	* author_id: int unsigned <<foreign key>>
}

ScenarioAuthor }o-|| Scenario
ScenarioAuthor }o-|| Author

entity ScenarioDictionary {
    * scenario_dictionary_id: int unsigned <<generated>>
    --
    * scenario_id: int unsigned <<foreign key>>
    * scenario_name: varchar(255) <<unique>>
}

Scenario ||--|{ ScenarioDictionary

entity Participate {
    * participate_id: int unsigned <<generated>>
    --
    * scenario_id: int unsigned <<foreign key>>
    * user_id: int unsigned <<foreign key>>
    * disp_order: int unsigned
}

User ||--o{ Participate
Scenario ||--o{ Participate

entity ParticipateRole {
    * participate_role_id: int unsigned <<generated>>
    --
    * participate_id: int unsigned <<foreign key>>
    * participate_role_type: varchar(50)
}

Participate ||--|{ ParticipateRole

entity ParticipateImpression {
	* participate_impression_id: int unsigned <<generated>>
	--
	* participate_id: int unsigned <<foreign key>>
	* has_spoiler: boolean
	* disclosure_range: varchar(50)
	* impression: text
}

Participate ||--o| ParticipateImpression

entity ParticipateRuleBook {
	* participate_rule_book_id: int unsigned <<generated>>
	--
	* participate_id: int unsigned <<foreign key>>
	* rule_book_id: int unsigned <<foreign key>>
}

ParticipateRuleBook }o-|| Participate
ParticipateRuleBook }o-|| RuleBook

@enduml